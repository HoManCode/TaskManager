{"ast":null,"code":"import _slicedToArray from \"/Users/hoomanshykhipour/Documents/Learning/fullStack/Front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/hoomanshykhipour/Documents/Learning/fullStack/Front-end/src/components/PrivateRoute.js\";\nimport React, { useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport ajax from \"../services/ajax\";\nimport { useUser } from '../services/UserProvider';\nvar PrivateRoute = function PrivateRoute(props) {\n  var user = useUser();\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoaded = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isValid = _useState4[0],\n    setIsValid = _useState4[1];\n  var children = props.children;\n  if (user && user.jwt) {\n    ajax(\"http://localhost:8080api/auth/validate\", \"get\", user.jwt).then(function (isValid) {\n      setIsValid(isValid);\n      setIsLoaded(false);\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(Navigate, {\n      to: \"/login\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 15\n      }\n    });\n  }\n  return isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }\n  }, \" Loading ... \") : isValid === true ? children : /*#__PURE__*/React.createElement(Navigate, {\n    to: \"/login\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  });\n};\nexport default PrivateRoute;","map":{"version":3,"names":["React","useState","Navigate","ajax","useUser","PrivateRoute","props","user","isLoading","setIsLoaded","isValid","setIsValid","children","jwt","then"],"sources":["/Users/hoomanshykhipour/Documents/Learning/fullStack/Front-end/src/components/PrivateRoute.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport ajax from \"../services/ajax\"\nimport { useUser } from '../services/UserProvider';\n\nconst PrivateRoute = (props) => {\n    const user = useUser();\n    const [isLoading, setIsLoaded] = useState(true);\n    const [isValid, setIsValid] = useState(null);\n    const { children } = props;\n\n    if( user && user.jwt ){\n        ajax(`http://localhost:8080api/auth/validate`,\"get\",user.jwt)\n        .then((isValid) => {\n            setIsValid(isValid);\n            setIsLoaded(false);\n        });\n    } else {\n        return<Navigate to=\"/login\" />;\n    }\n\n\n    return isLoading ? (\n        <div> Loading ... </div>\n    ) : isValid === true ? (\n        children\n    ) : (\n        <Navigate to=\"/login\" />\n    );\n    \n};\n\nexport default PrivateRoute;"],"mappings":";;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,OAAOC,IAAI,MAAM,kBAAkB;AACnC,SAASC,OAAO,QAAQ,0BAA0B;AAElD,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,KAAK,EAAK;EAC5B,IAAMC,IAAI,GAAGH,OAAO,EAAE;EAAC,gBACUH,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAxCO,SAAS;IAAEC,WAAW;EAAA,iBACCR,QAAQ,CAAC,IAAI,CAAC;IAAA;IAArCS,OAAO;IAAEC,UAAU;EAAA,IAClBC,QAAQ,GAAKN,KAAK,CAAlBM,QAAQ;EAEhB,IAAIL,IAAI,IAAIA,IAAI,CAACM,GAAG,EAAE;IAClBV,IAAI,2CAA0C,KAAK,EAACI,IAAI,CAACM,GAAG,CAAC,CAC5DC,IAAI,CAAC,UAACJ,OAAO,EAAK;MACfC,UAAU,CAACD,OAAO,CAAC;MACnBD,WAAW,CAAC,KAAK,CAAC;IACtB,CAAC,CAAC;EACN,CAAC,MAAM;IACH,oBAAM,oBAAC,QAAQ;MAAC,EAAE,EAAC,QAAQ;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAG;EAClC;EAGA,OAAOD,SAAS,gBACZ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,mBAAwB,GACxBE,OAAO,KAAK,IAAI,GAChBE,QAAQ,gBAER,oBAAC,QAAQ;IAAC,EAAE,EAAC,QAAQ;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACxB;AAEL,CAAC;AAED,eAAeP,YAAY"},"metadata":{},"sourceType":"module"}